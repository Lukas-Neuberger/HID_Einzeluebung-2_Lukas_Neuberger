<div class="container mt-4">
  <div class="row justify-content-center">
    <!-- Erste Tabelle: Kursinformationen -->
    <div class="col-12 col-md-10 mb-5 mt-5">
      <h3 class="text-center">Kursinformationen</h3>
      <div class="table-responsive">
        <table class="table table-striped table-bordered">
          <thead class="table-dark">
            <tr>
              <th>Kurs</th>
              <th>Veranstaltungsort</th>
              <th>Adresse des Veranstaltungsortes</th>
              <th>Ã–ffentlich erreichbar?</th>
              <th>Kursleiter</th>
              <th class="Termine">Alle Termine</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let course of storeService.courses">
              <td>{{ course.name }}</td>
              <td>{{ course.eventLocation.name }}</td>
              <td>{{ course.eventLocation.address }}</td>
              <td>{{ course.eventLocation.venueByPublicTansport ? 'Ja' : 'Nein' }}</td>
              <td>{{ course.instructor }}</td>
              <td>
                <ul>
                  <li *ngFor="let date of course.dates">
                    <span>{{ date.begin | date: 'MMM dd, yyyy \'um\' hh:mm a' }}</span> - 
                    <span>{{ date.end | date: 'MMM dd, yyyy \'um\' hh:mm a' }}</span>
                  </li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div> 
    
    <!-- Zweite Tabelle: Anmeldungen -->
    <div class="col-12 col-md-10 mb-5">
      <h3 class="text-center">Anmeldungen</h3>
      <div class="text-center mt-4">
        <button 
          [ngClass]="page == storeService.currentPage ? 'active' : ''" 
          (click)="selectPage(page)" 
          class="btn btn-outline-primary mx-1"
          *ngFor="let page of returnAllPages()">
          {{ page }}
        </button>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-bordered">
          <thead class="table-dark">
            <tr>
              <th>Name</th>
              <th>Geburtsdatum</th>
              <th>Kurs</th>
              <th (click)="sortByDate()" style="cursor: pointer;">
                Anmeldedatum
                <mat-icon *ngIf="sortOrder === 'asc'">arrow_upward</mat-icon>
                <mat-icon *ngIf="sortOrder === 'desc'">arrow_downward</mat-icon>
              </th>
              <th>Abmelden</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let registration of storeService.registrations">
              <td>{{ registration.name }}</td>
              <td>{{ registration.birthdate | date: 'yyyy-MM-dd' }}</td>
              <td>{{ registration.course.name }}</td>
              <td>{{ registration.registrationDate | date: 'yyyy-MM-dd' }}</td>
              <td>
                <div *ngIf="registration.deleting; else showButton">
                  <mat-spinner diameter="25"></mat-spinner>
                </div>
                <ng-template #showButton>
                  <button mat-raised-button color="warn" (click)="onDelete(registration.id)">
                    Abmelden
                  </button>
                </ng-template>
              </td>
            </tr> 
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Pagination unterhalb -->
  <div class="text-center mt-4">
    <button 
      [ngClass]="page == storeService.currentPage ? 'active' : ''" 
      (click)="selectPage(page)" 
      class="btn btn-outline-primary mx-1"
      *ngFor="let page of returnAllPages()">
      {{ page }}
    </button>
  </div>
</div>
